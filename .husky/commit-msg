#!/usr/bin/env sh

# Commit message validation with emoji enforcement
commit_regex='^(âœ¨|ğŸ›|ğŸ“|ğŸ¨|âš¡|ğŸ”§|ğŸš€|ğŸ”’|â™»ï¸|ğŸ—‘ï¸|ğŸšš|ğŸ“¦|ğŸ—ï¸|ğŸ§ª|ğŸ’š|ğŸ“±|ğŸŒ|ğŸ”€|âª|ğŸ”–|ğŸš¨|ğŸš§|ğŸ’¡|ğŸ±|â™¿|ğŸ’¬|ğŸ—ƒï¸|ğŸ”Š|ğŸ”‡|ğŸ‘¥|ğŸš¸|ğŸ“¸|âš—ï¸|ğŸ”|ğŸ·ï¸|ğŸŒ±|ğŸš©|ğŸ¥…|ğŸ’«|ğŸ—‚ï¸|ğŸ“„) (feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\(.+\))?: .{1,50}'

if ! grep -qE "$commit_regex" "$1"; then
    echo ""
    echo "ğŸš¨ Invalid commit message format!"
    echo ""
    echo "ğŸ“‹ Required format: <emoji> <type>: <subject>"
    echo ""
    echo "âœ… Valid examples:"
    echo "  âœ¨ feat: add user authentication"
    echo "  ğŸ› fix: resolve database timeout"
    echo "  ğŸ“ docs: update API documentation"
    echo "  ğŸ¨ style: format code with biome"
    echo ""
    echo "ğŸ“– See .gitmessage for full emoji list"
    echo ""
    exit 1
fi
